"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[198],{5400:function(a,b,c){c.d(b,{TS:function(){return aK},Yk:function(){return o},h2:function(){return aI},ox:function(){return aH},yS:function(){return aJ}});var d=c(5619);c(3454);/*!
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */ let e="data-tabster",f="data-tabster-dummy",g="tabster:deloser",h="tabster:modalizer",i="tabster:mover",j={Any:0,Accessible:1,Focusable:2},k={History:0,DeloserDefault:1,RootDefault:2,DeloserFirst:3,RootFirst:4},l={Invisible:0,PartiallyVisible:1,Visible:2},m={Both:0,Vertical:1,Horizontal:2,Grid:3},n={Unlimited:0,Limited:1,LimitedTrapFocus:2};var o=Object.freeze({__proto__:null,TabsterAttributeName:e,TabsterDummyInputAttributeName:f,DeloserEventName:g,ModalizerEventName:h,MoverEventName:i,ObservedElementAccesibilities:j,RestoreFocusOrders:k,Visibilities:l,MoverDirections:m,GroupperTabbabilities:n});/*!
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */ function p(a,b){var c;return null===(c=a.storageEntry(b))|| void 0===c?void 0:c.tabster}function q(a,b,c){var d,f;let g=c||a._noop?void 0:b.getAttribute(e),h=a.storageEntry(b),i;if(g){if(g===(null===(d=null==h?void 0:h.attr)|| void 0===d?void 0:d.string))return;try{let j=JSON.parse(g);if("object"!=typeof j)throw Error("Value is not a JSON object, got '"+g+"'.");i={string:g,object:j}}catch(k){}}else if(!h)return;h||(h=a.storageEntry(b,!0)),h.tabster||(h.tabster={});let l=h.tabster||{},m=(null===(f=h.attr)|| void 0===f?void 0:f.object)||{},n=(null==i?void 0:i.object)||{};for(let o of Object.keys(m))if(!n[o]){if("root"===o){let p=l[o];p&&a.root.onRoot(p,!0)}else if("modalizer"===o){let q=l.modalizer;a.modalizer&&q&&a.modalizer.updateModalizer(q,!0)}switch(o){case"deloser":case"root":case"groupper":case"modalizer":case"mover":let r=l[o];r&&(r.dispose(),delete l[o]);break;case"observed":delete l[o],a.observedElement&&a.observedElement.onObservedElementUpdate(b);break;case"focusable":case"outline":case"uncontrolled":delete l[o]}}for(let s of Object.keys(n))switch(s){case"deloser":l.deloser?l.deloser.setProps(n.deloser):a.deloser&&(l.deloser=a.deloser.createDeloser(b,n.deloser));break;case"root":l.root?l.root.setProps(n.root):l.root=a.root.createRoot(b,n.root),a.root.onRoot(l.root);break;case"modalizer":l.modalizer?l.modalizer.setProps(n.modalizer):a.modalizer&&(l.modalizer=a.modalizer.createModalizer(b,n.modalizer));break;case"focusable":l.focusable=n.focusable;break;case"groupper":l.groupper?l.groupper.setProps(n.groupper):a.groupper&&(l.groupper=a.groupper.createGroupper(b,n.groupper));break;case"mover":l.mover?l.mover.setProps(n.mover):a.mover&&(l.mover=a.mover.createMover(b,n.mover));break;case"observed":a.observedElement&&(l.observed=n.observed,a.observedElement.onObservedElementUpdate(b));break;case"uncontrolled":l.uncontrolled=n.uncontrolled;break;case"outline":a.outline&&(l.outline=n.outline);break;default:console.error("Unknown key '"+s+"' in data-tabster attribute value.")}i?h.attr=i:(0===Object.keys(l).length&&(delete h.tabster,delete h.attr),a.storageEntry(b,!1))}/*!
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */ class r{constructor(){this._callbacks=[]}dispose(){this._callbacks=[],delete this._val}subscribe(a){let b=this._callbacks.indexOf(a);b<0&&this._callbacks.push(a)}unsubscribe(a){let b=this._callbacks.indexOf(a);b>=0&&this._callbacks.splice(b,1)}setVal(a,b){this._val!==a&&(this._val=a,this._callCallbacks(a,b))}getVal(){return this._val}trigger(a,b){this._callCallbacks(a,b)}_callCallbacks(a,b){this._callbacks.forEach(c=>c(a,b))}}/*!
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */ class s extends r{constructor(a){super(),this._onChange=a=>{this.setVal(a,void 0)},this._keyborg=(0,d.Vm)(a()),this._keyborg.subscribe(this._onChange)}dispose(){super.dispose(),this._keyborg&&(this._keyborg.unsubscribe(this._onChange),(0,d.ub)(this._keyborg),delete this._keyborg)}static setVal(a,b){var c;null===(c=a._keyborg)|| void 0===c||c.setVal(b)}isNavigatingWithKeyboard(){var a;return!!(null===(a=this._keyborg)|| void 0===a?void 0:a.isNavigatingWithKeyboard())}}/*!
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */ let t,u="undefined"!=typeof DOMRect?DOMRect:class{constructor(a,b,c,d){this.left=a||0,this.top=b||0,this.right=(a||0)+(c||0),this.bottom=(b||0)+(d||0)}},v=0;try{document.createTreeWalker(document,NodeFilter.SHOW_ELEMENT),t=!1}catch(w){t=!0}function x(a){let b=a(),c=b.__tabsterInstanceContext;return c||(c={elementByUId:{},basics:{Promise:b.Promise||void 0,WeakRef:b.WeakRef||void 0},containerBoundingRectCache:{},lastContainerBoundingRectCacheId:0,fakeWeakRefs:[],fakeWeakRefsStarted:!1},b.__tabsterInstanceContext=c),c}class y{constructor(a){this._target=a}deref(){return this._target}static cleanup(a,b){return!a._target||(!!b||!M(a._target.ownerDocument,a._target))&&(delete a._target,!0)}}class z{constructor(a,b,c){let d=x(a),e;d.WeakRef?e=new d.WeakRef(b):(e=new y(b),d.fakeWeakRefs.push(e)),this._ref=e,this._data=c}get(){let a=this._ref,b;return!a||(b=a.deref())||delete this._ref,b}getData(){return this._data}}function A(a,b){let c=x(a);c.fakeWeakRefs=c.fakeWeakRefs.filter(a=>!y.cleanup(a,b))}function B(a){let b=x(a);b.fakeWeakRefsStarted||(b.fakeWeakRefsStarted=!0,b.WeakRef=P(b)),b.fakeWeakRefsTimer||(b.fakeWeakRefsTimer=a().setTimeout(()=>{b.fakeWeakRefsTimer=void 0,A(a),B(a)},12e4))}function C(a,b,c){if(b.nodeType!==Node.ELEMENT_NODE)return;let d=t?c:{acceptNode:c};return a.createTreeWalker(b,NodeFilter.SHOW_ELEMENT,d,!1)}function D(a,b){let c=b.__tabsterCacheId,d=x(a),e=c?d.containerBoundingRectCache[c]:void 0;if(e)return e.rect;let f=b.ownerDocument&&b.ownerDocument.documentElement;if(!f)return new u;let g=0,h=0,i=f.clientWidth,j=f.clientHeight;if(b!==f){let k=b.getBoundingClientRect();g=Math.max(g,k.left),h=Math.max(h,k.top),i=Math.min(i,k.right),j=Math.min(j,k.bottom)}let l=new u(g<i?g:-1,h<j?h:-1,g<i?i-g:0,h<j?j-h:0);return c||(c="r-"+ ++d.lastContainerBoundingRectCacheId,b.__tabsterCacheId=c),d.containerBoundingRectCache[c]={rect:l,element:b},d.containerBoundingRectCacheTimer||(d.containerBoundingRectCacheTimer=window.setTimeout(()=>{for(let a of(d.containerBoundingRectCacheTimer=void 0,Object.keys(d.containerBoundingRectCache)))delete d.containerBoundingRectCache[a].element.__tabsterCacheId;d.containerBoundingRectCache={}},50)),l}function E(a,b){let c=G(b);if(c){let d=D(a,c),e=b.getBoundingClientRect();return e.top>=d.top&&e.bottom<=d.bottom}return!1}function F(a,b,c){let d=G(b);if(d){let e=D(a,d),f=b.getBoundingClientRect();c?d.scrollTop+=f.top-e.top:d.scrollTop+=f.bottom-e.bottom}}function G(a){let b=a.ownerDocument;if(b){for(let c=a.parentElement;c;c=c.parentElement)if(c.scrollWidth>c.clientWidth||c.scrollHeight>c.clientHeight)return c;return b.documentElement}return null}function H(a){return!!a.__shouldIgnoreFocus}function I(a){let b=new Uint32Array(4);if(a.crypto&&a.crypto.getRandomValues)a.crypto.getRandomValues(b);else if(a.msCrypto&&a.msCrypto.getRandomValues)a.msCrypto.getRandomValues(b);else for(let c=0;c<b.length;c++)b[c]=4294967295*Math.random();let d=[];for(let e=0;e<b.length;e++)d.push(b[e].toString(36));return d.push("|"),d.push((++v).toString(36)),d.push("|"),d.push(Date.now().toString(36)),d.join("")}function J(a,b){let c=x(a),d=b.__tabsterElementUID;return d||(d=b.__tabsterElementUID=I(a())),!c.elementByUId[d]&&M(b.ownerDocument,b)&&(c.elementByUId[d]=new z(a,b)),d}function K(a){let b=a.__tabsterCrossOriginWindowUID;return b||(b=a.__tabsterCrossOriginWindowUID=I(a)),b}function L(a,b){let c=x(a);for(let d of Object.keys(c.elementByUId)){let e=c.elementByUId[d],f=e&&e.get();(!f||!b||b.contains(f))&&delete c.elementByUId[d]}}function M(a,b){var c;return!!(null===(c=null==a?void 0:a.body)|| void 0===c?void 0:c.contains(b))}function N(a,b){let c=a.matches||a.matchesSelector||a.msMatchesSelector||a.webkitMatchesSelector;return c&&c.call(a,b)}function O(a){let b=x(a);if(b.basics.Promise)return b.basics.Promise;throw Error("No Promise defined.")}function P(a){return a.basics.WeakRef}let Q=0;class R{constructor(a,b,c){let d=a.getWindow;this._tabster=a,this._element=new z(d,b),this._props={...c},this.id="i"+ ++Q}getElement(){return this._element.get()}getProps(){return this._props}setProps(a){this._props={...a}}}class S{constructor(a,b,c){var d,e;this._focusIn=()=>{this.onFocusIn&&this.input&&this.onFocusIn(this)},this._focusOut=()=>{this.shouldMoveOut=!1,this.onFocusOut&&this.input&&this.onFocusOut(this),this._isPhantom&&this.dispose()};let g=a(),h=g.document.createElement("i");h.tabIndex=0,h.setAttribute("role","none"),h.setAttribute(f,""),h.setAttribute("aria-hidden","true");let i=h.style;i.position="fixed",i.width=i.height="1px",i.opacity="0.001",i.zIndex="-1",i.setProperty("content-visibility","hidden"),(e=h).__shouldIgnoreFocus=!0,this.input=h,this.isFirst=b.isFirst,this._isPhantom=null!==(d=b.isPhantom)&& void 0!==d&&d,h.addEventListener("focusin",this._focusIn),h.addEventListener("focusout",this._focusOut),h.__tabsterDummyContainer=c,this._isPhantom&&(this._disposeTimer=g.setTimeout(()=>{delete this._disposeTimer,this.dispose()},0),this._clearDisposeTimeout=()=>{this._disposeTimer&&(g.clearTimeout(this._disposeTimer),delete this._disposeTimer),delete this._clearDisposeTimeout})}dispose(){var a;this._clearDisposeTimeout&&this._clearDisposeTimeout();let b=this.input;b&&(delete this.onFocusIn,delete this.onFocusOut,delete this.input,b.removeEventListener("focusin",this._focusIn),b.removeEventListener("focusout",this._focusOut),delete b.__tabsterDummyContainer,null===(a=b.parentElement)|| void 0===a||a.removeChild(b))}setTopLeft(a,b){var c;let d=null===(c=this.input)|| void 0===c?void 0:c.style;d&&(d.top=a+"px",d.left=b+"px")}}let T={Root:1,Modalizer:2,Mover:3,Groupper:4};class U{constructor(a,b,c){this._element=b,this._instance=new V(a,b,this,c),this.moveOutWithDefaultAction=a=>{var b;null===(b=this._instance)|| void 0===b||b.moveOutWithDefaultAction(a)}}_setHandlers(a,b){this._onFocusIn=a,this._onFocusOut=b}getHandler(a){return a?this._onFocusIn:this._onFocusOut}setTabbable(a){var b;null===(b=this._instance)|| void 0===b||b.setTabbable(this,a)}dispose(){this._instance&&(this._instance.dispose(this),delete this._instance),delete this._onFocusIn,delete this._onFocusOut}}class V{constructor(a,b,c,d){var e;this._wrappers=[],this._isOutside=!1,this._transformElements=[],this._onFocusIn=a=>{this._onFocus(!0,a)},this._onFocusOut=a=>{this._onFocus(!1,a)},this.moveOutWithDefaultAction=a=>{let b=this._firstDummy,c=this._lastDummy;(null==b?void 0:b.input)&&(null==c?void 0:c.input)&&(a?(b.shouldMoveOut=!0,b.input.tabIndex=0,b.input.focus()):(c.shouldMoveOut=!0,c.input.tabIndex=0,c.input.focus()))},this.setTabbable=(a,b)=>{var c,d;for(let e of this._wrappers)if(e.manager===a){e.tabbable=b;break}let f=this._getCurrent();if(f){let g=f.tabbable?0:-1,h=null===(c=this._firstDummy)|| void 0===c?void 0:c.input;h&&(h.tabIndex=g),(h=null===(d=this._lastDummy)|| void 0===d?void 0:d.input)&&(h.tabIndex=g)}},this._addTransformOffsets=()=>{let a=this._getWindow();this._scrollFrame&&a.cancelAnimationFrame(this._scrollFrame),this._scrollFrame=a.requestAnimationFrame(()=>{delete this._scrollFrame,this._reallyAddTransformOffsets()})};let f=b.get();if(!f)throw Error("No element");this._getWindow=a.getWindow;let g=f.__tabsterDummy;if((g||this)._wrappers.push({manager:c,priority:d,tabbable:!0}),g)return g;f.__tabsterDummy=this,this._firstDummy=new S(this._getWindow,{isFirst:!0},b),this._lastDummy=new S(this._getWindow,{isFirst:!1},b),this._firstDummy.onFocusIn=this._onFocusIn,this._firstDummy.onFocusOut=this._onFocusOut,this._lastDummy.onFocusIn=this._onFocusIn,this._lastDummy.onFocusOut=this._onFocusOut,this._element=b,this._addDummyInputs();let h=null===(e=b.get())|| void 0===e?void 0:e.tagName;this._isOutside="UL"===h||"OL"===h||"TABLE"===h,this._observeMutations()}dispose(a,b){var c,d;let e=this._wrappers=this._wrappers.filter(c=>c.manager!==a&&!b);if(0===e.length){for(let f of(this._unobserve&&(this._unobserve(),delete this._unobserve),this._transformElements))f.removeEventListener("scroll",this._addTransformOffsets);this._transformElements=[];let g=this._getWindow();this._scrollFrame&&(g.cancelAnimationFrame(this._scrollFrame),delete this._scrollFrame),this._addTimer&&(g.clearTimeout(this._addTimer),delete this._addTimer),null===(c=this._firstDummy)|| void 0===c||c.dispose(),null===(d=this._lastDummy)|| void 0===d||d.dispose()}}_onFocus(a,b){var c;let d=this._getCurrent();d&&(null===(c=d.manager.getHandler(a))|| void 0===c||c(b))}_getCurrent(){return this._wrappers.sort((a,b)=>a.tabbable!==b.tabbable?a.tabbable?-1:1:a.priority-b.priority),this._wrappers[0]}_addDummyInputs(){!this._addTimer&&(this._addTimer=this._getWindow().setTimeout(()=>{var a,b,c;delete this._addTimer;let d=null===(a=this._element)|| void 0===a?void 0:a.get(),e=null===(b=this._firstDummy)|| void 0===b?void 0:b.input,f=null===(c=this._lastDummy)|| void 0===c?void 0:c.input;if(d&&e&&f){if(this._isOutside){let g=d.parentElement;if(g){let h=d.nextElementSibling;h!==f&&g.insertBefore(f,h),d.previousElementSibling!==e&&g.insertBefore(e,d)}}else{d.lastElementChild!==f&&d.appendChild(f);let i=d.firstElementChild;i&&i!==e&&d.insertBefore(e,i)}this._addTransformOffsets()}},0))}_observeMutations(){var a;if(this._unobserve)return;let b=new MutationObserver(()=>{this._unobserve&&this._addDummyInputs()}),c=null===(a=this._element)|| void 0===a?void 0:a.get(),d=this._isOutside?null==c?void 0:c.parentElement:c;d&&(b.observe(d,{childList:!0}),this._unobserve=()=>{b.disconnect()})}_reallyAddTransformOffsets(){var a,b,c,d;let e=(null===(a=this._firstDummy)|| void 0===a?void 0:a.input)||(null===(b=this._lastDummy)|| void 0===b?void 0:b.input),f=this._transformElements,g=[],h=new WeakMap,i=new WeakMap,j=0,k=0;for(let l of f)h.set(l,l);let m=this._getWindow();for(let n=e;n;n=n.parentElement){let o=m.getComputedStyle(n).transform;if(o&&"none"!==o){let p=h.get(n);p||(p=n).addEventListener("scroll",this._addTransformOffsets),g.push(p),i.set(p,p),j+=p.scrollTop,k+=p.scrollLeft}}for(let q of f)i.get(q)||q.removeEventListener("scroll",this._addTransformOffsets);this._transformElements=g,null===(c=this._firstDummy)|| void 0===c||c.setTopLeft(j,k),null===(d=this._lastDummy)|| void 0===d||d.setTopLeft(j,k)}}function W(a){let b=null;for(let c=a.lastElementChild;c;c=c.lastElementChild)b=c;return b}function X(a,b,c){let d=document.createEvent("HTMLEvents");return d.initEvent(b,!0,!0),d.details=c,a.dispatchEvent(d),!d.defaultPrevented}class Y extends R{constructor(a,b,c,d){super(a,b,d),this._isFocused=!1,this._setFocused=(a,b)=>{if(this._setFocusedTimer&&(this._tabster.getWindow().clearTimeout(this._setFocusedTimer),delete this._setFocusedTimer),this._isFocused===a)return;let c=this._element.get();c&&(a?(this._isFocused=!0,X(this._tabster.root.eventTarget,"focus",{element:c,fromAdjacent:b})):this._setFocusedTimer=this._tabster.getWindow().setTimeout(()=>{delete this._setFocusedTimer,this._isFocused=!1,X(this._tabster.root.eventTarget,"blur",{element:c,fromAdjacent:b})},0))},this._onFocus=a=>{var b;let c=this._tabster.getWindow();if(this._setTabbableTimer&&(c.clearTimeout(this._setTabbableTimer),delete this._setTabbableTimer),a){let d=Z.getTabsterContext(this._tabster,a);if(d&&this._setFocused(d.root.getElement()===this._element.get()),!d||d.uncontrolled||this._tabster.rootDummyInputs){null===(b=this._dummyManager)|| void 0===b||b.setTabbable(!1);return}}else this._setFocused(!1);this._setTabbableTimer=c.setTimeout(()=>{var a;delete this._setTabbableTimer,null===(a=this._dummyManager)|| void 0===a||a.setTabbable(!0)},0)},this._onDispose=c;let e=a.getWindow;this.uid=J(e,b),(a.controlTab||a.rootDummyInputs)&&(this._dummyManager=new class extends U{constructor(a,b,c){super(a,b,T.Root),this._onDummyInputFocus=a=>{var b;if(a.shouldMoveOut)this._setFocused(!1,!0);else{s.setVal(this._tabster.keyboardNavigation,!0);let c=this._element.get();if(c){this._setFocused(!0,!0);let d=a.isFirst?this._tabster.focusedElement.focusFirst({container:c}):this._tabster.focusedElement.focusLast({container:c});if(d)return}null===(b=a.input)|| void 0===b||b.blur()}},this._setHandlers(this._onDummyInputFocus),this._tabster=a,this._setFocused=c}}(a,this._element,this._setFocused)),a.focusedElement.subscribe(this._onFocus),this._add()}dispose(){var a;this._onDispose(this);let b=this._tabster.getWindow();this._setFocusedTimer&&(b.clearTimeout(this._setFocusedTimer),delete this._setFocusedTimer),this._setTabbableTimer&&(b.clearTimeout(this._setTabbableTimer),delete this._setTabbableTimer),null===(a=this._dummyManager)|| void 0===a||a.dispose(),this._remove()}moveOutWithDefaultAction(a){var b;null===(b=this._dummyManager)|| void 0===b||b.moveOutWithDefaultAction(a)}_add(){}_remove(){}}class Z{constructor(a,b){this._roots={},this.rootById={},this._init=()=>{this._initTimer=void 0},this._onRootDispose=a=>{delete this._roots[a.id]},this._tabster=a,this._win=a.getWindow,this._initTimer=this._win().setTimeout(this._init,0),this._autoRoot=b,this.eventTarget=new EventTarget}dispose(){let a=this._win();this._autoRootInstance&&(this._autoRootInstance.dispose(),delete this._autoRootInstance,delete this._autoRoot),this._initTimer&&(a.clearTimeout(this._initTimer),this._initTimer=void 0),Object.keys(this._roots).forEach(a=>{this._roots[a]&&(this._roots[a].dispose(),delete this._roots[a])}),this.rootById={}}createRoot(a,b){let c=new Y(this._tabster,a,this._onRootDispose,b);return this._roots[c.id]=c,c}static getRootByUId(a,b){let c=a().__tabsterInstance;return c&&c.root.rootById[b]}static getTabsterContext(a,b,c){var d,e;if(void 0===c&&(c={}),!b.ownerDocument)return;let f=c.checkRtl,g,h,i,j,k=!1,l,m,n,o=b,q,r;for(c.allMoversGrouppers&&(r=[],q={instances:r,moverCount:0,groupperCount:0});o&&(!g||f);){let s=p(a,o);if(f&& void 0===m){let t=o.dir;t&&(m="rtl"===t.toLowerCase())}if(!s){o=o.parentElement;continue}s.uncontrolled&&(n=o),!j&&(null===(d=s.focusable)|| void 0===d?void 0:d.excludeFromMover)&&!i&&(k=!0);let u=s.groupper,v=s.mover;q&&r&&(v&&r.unshift({isMover:!0,mover:v}),q.moverCount++,u&&r.unshift({isMover:!1,groupper:u}),q.groupperCount++),!i&&u&&(i=u),!j&&v&&(j=v,l=!!i),!h&&s.modalizer&&(h=s.modalizer),s.root&&(g=s.root),o=o.parentElement}if(!g){let w=a.root,x=w._autoRoot;if(x&&!w._autoRootInstance){let y=null===(e=b.ownerDocument)|| void 0===e?void 0:e.body;y&&(w._autoRootInstance=new Y(w._tabster,y,w._onRootDispose,x))}g=w._autoRootInstance}return r&&0===r.length&&(q=void 0),g?{root:g,modalizer:h,groupper:i,mover:j,isGroupperFirst:l,isRtl:f?!!m:void 0,uncontrolled:n,allMoversGrouppers:q,isExcludedFromMover:k}:void 0}onRoot(a,b){b?delete this.rootById[a.uid]:this.rootById[a.uid]=a}}class $ extends null{constructor(a,b){super(),this.uid=b.uid,this._tabster=a,this._deloser=b}belongsTo(a){return a===this._deloser}unshift(a){this._deloser.unshift(a)}async focusAvailable(){let a=this._deloser.findAvailable();return!!a&&this._tabster.focusedElement.focus(a)}async resetFocus(){let a=this._tabster.getWindow;return O(a).resolve(this._deloser.resetFocus())}}class _ extends null{unshiftToDeloser(a,b){let c;for(let d=0;d<this._history.length;d++)if(this._history[d].belongsTo(a)){c=this._history[d],this._history.splice(d,1);break}c||(c=new $(this._tabster,a)),c.unshift(b),this._history.unshift(c),this._history.splice(10,this._history.length-10)}async focusAvailable(a){let b=!!a;for(let c of this._history)if(a&&c.belongsTo(a)&&(b=!1),!b&&await c.focusAvailable())return!0;return!1}async resetFocus(a){let b=!!a,c={};for(let d of this._history)a&&d.belongsTo(a)&&(b=!1),b||c[d.uid]||(c[d.uid]=d);for(let e of Object.keys(c))if(await c[e].resetFocus())return!0;return!1}}function aa(a,b,c){let d=[],e=/(:|\.|\[|\]|,|=|@)/g;a.id&&d.push("#"+a.id.replace(e,"\\$1")),!1!==b&&a.className&&a.className.split(" ").forEach(a=>{(a=a.trim())&&d.push("."+a.replace(e,"\\$1"))});let f=0,g;if(!1!==c&&0===d.length){for(g=a;g;)f++,g=g.previousElementSibling;d.unshift(":nth-child("+f+")")}return d.unshift(a.tagName.toLowerCase()),d.join("")}class ab extends null{constructor(a,b,c,d){super(a,b,d),this._isActive=!1,this._history=[[]],this._snapshotIndex=0,this.isActive=()=>this._isActive,this.setSnapshot=a=>{this._snapshotIndex=a,this._history.length>a+1&&this._history.splice(a+1,this._history.length-a-1),this._history[a]||(this._history[a]=[])},this.focusFirst=()=>{let a=this._element.get();return!!a&&this._tabster.focusedElement.focusFirst({container:a})},this.focusDefault=()=>{let a=this._element.get();return!!a&&this._tabster.focusedElement.focusDefault(a)},this.resetFocus=()=>{let a=this._element.get();return!!a&&this._tabster.focusedElement.resetFocus(a)},this.clearHistory=a=>{let b=this._element.get();if(!b){this._history[this._snapshotIndex]=[];return}this._history[this._snapshotIndex]=this._history[this._snapshotIndex].filter(c=>{let d=c.get();return!!d&&!!a&&b.contains(d)})},this.uid=J(a.getWindow,b),this._onDispose=c}dispose(){this._remove(),this._onDispose(this),this._isActive=!1,this._snapshotIndex=0,this._props={},this._history=[]}setActive(a){this._isActive=a}getActions(){return{focusDefault:this.focusDefault,focusFirst:this.focusFirst,resetFocus:this.resetFocus,clearHistory:this.clearHistory,setSnapshot:this.setSnapshot,isActive:this.isActive}}unshift(a){let b=this._history[this._snapshotIndex];for((b=this._history[this._snapshotIndex]=b.filter(b=>{let c=b.get();return c&&c!==a})).unshift(new z(this._tabster.getWindow,a,function(a){if(!M(a.ownerDocument,a))return;let b=[aa(a)],c=a.parentElement;for(;c;){let d="BODY"===c.tagName;if(b.unshift(aa(c,!1,!d)),d)break;c=c.parentElement}return b.join(" ")}(a)));b.length>10;)b.pop()}findAvailable(){let a=this._element.get();if(!a||!this._tabster.focusable.isVisible(a))return null;let b=this._props.restoreFocusOrder,c=null,d=Z.getTabsterContext(this._tabster,a);if(!d)return null;let e=d.root,f=e.getElement();if(!f)return null;if(void 0===b&&(b=e.getProps().restoreFocusOrder),b===k.RootDefault&&(c=this._tabster.focusable.findDefault({container:f})),c||b!==k.RootFirst||(c=this._findFirst(f)),c)return c;let g=this._findInHistory(),h=this._tabster.focusable.findDefault({container:a}),i=this._findFirst(a);return g&&b===k.History?g:h&&b===k.DeloserDefault?h:i&&b===k.DeloserFirst?i:h||g||i||null}customFocusLostHandler(a){return X(a,g,this.getActions())}_findInHistory(){let a=this._history[this._snapshotIndex].slice(0);this.clearHistory(!0);for(let b=0;b<a.length;b++){let c=a[b],d=c.get(),e=this._element.get();if(d&&e&&e.contains(d)){if(this._tabster.focusable.isFocusable(d))return d}else if(!this._props.noSelectorCheck){let f=c.getData();if(f&&e){let g;try{g=e.ownerDocument.querySelectorAll(f)}catch(h){continue}for(let i=0;i<g.length;i++){let j=g[i];if(j&&this._tabster.focusable.isFocusable(j))return j}}}}return null}_findFirst(a){if(this._tabster.keyboardNavigation.isNavigatingWithKeyboard()){let b=this._tabster.focusable.findFirst({container:a});if(b)return b}return null}_remove(){}}class ac{constructor(a,b){this._inDeloser=!1,this._isRestoringFocus=!1,this._isPaused=!1,this._init=()=>{this._initTimer=void 0,this._tabster.focusedElement.subscribe(this._onFocus)},this._onFocus=a=>{if(this._restoreFocusTimer&&(this._win().clearTimeout(this._restoreFocusTimer),this._restoreFocusTimer=void 0),!a){this._scheduleRestoreFocus();return}let b=this._history.process(a);b?this._activate(b):this._deactivate()},this._onDeloserDispose=a=>{this._history.removeDeloser(a),a.isActive()&&this._scheduleRestoreFocus()},this._tabster=a,this._win=a.getWindow,this._history=new class{constructor(a){this._history=[],this._tabster=a}dispose(){this._history=[]}process(a){var b;let c=Z.getTabsterContext(this._tabster,a),d=c&&c.root.uid,e=ac.getDeloser(this._tabster,a);if(!d||!e)return;let f=this.make(d,()=>new _(this._tabster,d));return(!c||!c.modalizer||(null===(b=c.modalizer)|| void 0===b?void 0:b.isActive()))&&f.unshiftToDeloser(e,a),e}make(a,b){let c;for(let d=0;d<this._history.length;d++){let e=this._history[d];if(e.rootUId===a){c=e,this._history.splice(d,1);break}}return c||(c=b()),this._history.unshift(c),this._history.splice(10,this._history.length-10),c}removeDeloser(a){this._history.forEach(b=>{b.removeDeloser(a)}),this._history=this._history.filter(a=>a.getLength()>0)}async focusAvailable(a){let b=!!a;for(let c of this._history)if(a&&c.hasDeloser(a)&&(b=!1),!b&&await c.focusAvailable(a))return!0;return!1}async resetFocus(a){let b=!!a;for(let c of this._history)if(a&&c.hasDeloser(a)&&(b=!1),!b&&await c.resetFocus(a))return!0;return!1}}(a),this._initTimer=this._win().setTimeout(this._init,0);let c=null==b?void 0:b.autoDeloser;c&&(this._autoDeloser=c)}dispose(){let a=this._win();this._initTimer&&(a.clearTimeout(this._initTimer),this._initTimer=void 0),this._restoreFocusTimer&&(a.clearTimeout(this._restoreFocusTimer),this._restoreFocusTimer=void 0),this._autoDeloserInstance&&(this._autoDeloserInstance.dispose(),delete this._autoDeloserInstance,delete this._autoDeloser),this._tabster.focusedElement.unsubscribe(this._onFocus),this._history.dispose(),delete this._curDeloser}createDeloser(a,b){var c;let d=new ab(this._tabster,a,this._onDeloserDispose,b);return a.contains(null!==(c=this._tabster.focusedElement.getFocusedElement())&& void 0!==c?c:null)&&this._activate(d),d}getActions(a){for(let b=a;b;b=b.parentElement){let c=p(this._tabster,b);if(c&&c.deloser)return c.deloser.getActions()}}pause(){this._isPaused=!0,this._restoreFocusTimer&&(this._win().clearTimeout(this._restoreFocusTimer),this._restoreFocusTimer=void 0)}resume(a){this._isPaused=!1,a&&this._scheduleRestoreFocus()}_activate(a){let b=this._curDeloser;b!==a&&(this._inDeloser=!0,null==b||b.setActive(!1),a.setActive(!0),this._curDeloser=a)}_deactivate(){var a;this._inDeloser=!1,null===(a=this._curDeloser)|| void 0===a||a.setActive(!1),this._curDeloser=void 0}_scheduleRestoreFocus(a){if(this._isPaused||this._isRestoringFocus)return;let b=async()=>{this._restoreFocusTimer=void 0;let b=this._tabster.focusedElement.getLastFocusedElement();if(!a&&(this._isRestoringFocus||!this._inDeloser||(null==b?void 0:b.offsetParent)))return;let c=this._curDeloser;if(c){if(b&&c.customFocusLostHandler(b))return;let d=c.findAvailable();if(d&&this._tabster.focusedElement.focus(d))return}this._deactivate(),this._isRestoringFocus=!0,await this._history.focusAvailable(null)||await this._history.resetFocus(null),this._isRestoringFocus=!1};a?b():this._restoreFocusTimer=this._win().setTimeout(b,100)}static getDeloser(a,b){var c;for(let d=b;d;d=d.parentElement){let e=p(a,d);if(e&&e.deloser)return e.deloser}let f=a.deloser&&a.deloser;if(f){if(f._autoDeloserInstance)return f._autoDeloserInstance;let g=f._autoDeloser;if(!f._autoDeloserInstance&&g){let h=null===(c=b.ownerDocument)|| void 0===c?void 0:c.body;h&&(f._autoDeloserInstance=new ab(a,h,a.deloser._onDeloserDispose,g))}return f._autoDeloserInstance}}static getHistory(a){return a._history}static forceRestoreFocus(a){a._scheduleRestoreFocus(!0)}}let ad={Bootstrap:1,FocusElement:2,State:3,GetElement:4,RestoreFocusInDeloser:5,Ping:6};class ae extends null{constructor(a,b,c){super(),this._deloser=b,this._transactions=c}belongsTo(a){return a.deloserUId===this._deloser.deloserUId}async focusAvailable(){let a={...this._deloser,reset:!1};return this._transactions.beginTransaction(al,a).then(a=>!!a)}async resetFocus(){let a={...this._deloser,reset:!0};return this._transactions.beginTransaction(al,a).then(a=>!!a)}}class af extends null{constructor(a,b,c){super(a,b),this._transactions=c}unshift(a){let b;for(let c=0;c<this._history.length;c++)if(this._history[c].belongsTo(a)){b=this._history[c],this._history.splice(c,1);break}b||(b=new ae(this._tabster,a,this._transactions)),this._history.unshift(b),this._history.splice(10,this._history.length-10)}async focusAvailable(){for(let a of this._history)if(await a.focusAvailable())return!0;return!1}async resetFocus(){for(let a of this._history)if(await a.resetFocus())return!0;return!1}}class ag extends null{constructor(){super(...arguments),this.type=ad.Bootstrap}static shouldForward(){return!1}static async makeResponse(a){return{isNavigatingWithKeyboard:a.keyboardNavigation.isNavigatingWithKeyboard()}}}class ah extends null{constructor(){super(...arguments),this.type=ad.FocusElement}static shouldSelfRespond(){return!0}static shouldForward(a,b,c){let d=ak.findElement(a,c,b.beginData);return!d||!a.focusable.isFocusable(d)}static async makeResponse(a,b,c,d,e,f){let g=ak.findElement(a,c,b.beginData);return!!g&&a.focusedElement.focus(g)||!!await f}}let ai={Focused:1,Blurred:2,Observed:3,DeadWindow:4,KeyboardNavigation:5,Outline:6};class aj extends null{constructor(){super(...arguments),this.type=ad.State}static shouldSelfRespond(a,b){return b.state!==ai.DeadWindow&&b.state!==ai.KeyboardNavigation}static async makeResponse(a,b,c,d,e,f,g){let h=b.timestamp,i=b.beginData;if(h&&i)switch(i.state){case ai.Focused:return aj._makeFocusedResponse(a,h,i,e,g);case ai.Blurred:return aj._makeBlurredResponse(a,h,i,e.ctx);case ai.Observed:return aj._makeObservedResponse(a,i);case ai.DeadWindow:return aj._makeDeadWindowResponse(a,i,e,f);case ai.KeyboardNavigation:return aj._makeKeyboardNavigationResponse(a,e.ctx,i.isNavigatingWithKeyboard);case ai.Outline:return aj._makeOutlineResponse(a,e.ctx,i.outline)}return!0}static createElement(a,b){return b.uid?new an(a,b.uid,b.ownerUId,b.id,b.rootUId,b.observedName,b.observedDetails):null}static async _makeFocusedResponse(a,b,c,d,e){let f=aj.createElement(a,c);if(c&&c.ownerUId&&f){if(d.ctx.focusOwner=c.ownerUId,d.ctx.focusOwnerTimestamp=b,!e&&c.rootUId&&c.deloserUId){let g=a.deloser;if(g){let h=ac.getHistory(g),i={ownerUId:c.ownerUId,deloserUId:c.deloserUId,rootUId:c.rootUId},j=h.make(c.rootUId,()=>new af(a,i.rootUId,d));j.unshift(i)}}ao.setVal(a.crossOrigin.focusedElement,f,{isFocusedProgrammatically:c.isFocusedProgrammatically})}return!0}static async _makeBlurredResponse(a,b,c,d){return c&&(c.ownerUId===d.focusOwner||c.force)&&(!d.focusOwnerTimestamp||d.focusOwnerTimestamp<b)&&ao.setVal(a.crossOrigin.focusedElement,void 0,{}),!0}static async _makeObservedResponse(a,b){let c=b.observedName,d=aj.createElement(a,b);return c&&d&&ap.trigger(a.crossOrigin.observedElement,d,{name:c,details:b.observedDetails}),!0}static async _makeDeadWindowResponse(a,b,c,d){let e=b&&b.ownerUId;return e&&c.removeTarget(e),d.then(()=>{if(e===c.ctx.focusOwner){let b=a.deloser;b&&ac.forceRestoreFocus(b)}return!0})}static async _makeKeyboardNavigationResponse(a,b,c){return void 0!==c&&a.keyboardNavigation.isNavigatingWithKeyboard()!==c&&(b.ignoreKeyboardNavigationStateUpdate=!0,s.setVal(a.keyboardNavigation,c),b.ignoreKeyboardNavigationStateUpdate=!1),!0}static async _makeOutlineResponse(a,b,c){return b.origOutlineSetup&&b.origOutlineSetup.call(a.outline,c),!0}}class ak extends null{constructor(){super(...arguments),this.type=ad.GetElement}static shouldSelfRespond(){return!0}static findElement(a,b,c){let d;if(c&&(!c.ownerId||c.ownerId===K(b()))){if(c.id){if((d=b().document.getElementById(c.id))&&c.rootId){let e=Z.getTabsterContext(a,d);if(!e||e.root.uid!==c.rootId)return null}}else if(c.uid){let f=x(b).elementByUId[c.uid];d=f&&f.get()}else c.observedName&&(d=a.observedElement.getElement(c.observedName))}return d||null}static getElementData(a,b,c,d,e){let f=ac.getDeloser(a,b),g=Z.getTabsterContext(a,b),h=p(a,b),i=h&&h.observed;return{uid:J(c,b),ownerUId:e,id:b.id||void 0,rootUId:g?g.root.uid:void 0,deloserUId:f?aq(c,d,f):void 0,observedName:i&&i.name,observedDetails:i&&i.details}}static async makeResponse(a,b,c,d,e,f){let g=b.beginData,h,i;if(void 0===g?h=a.focusedElement.getFocusedElement():g&&(h=ak.findElement(a,c,g)||void 0),!h&&g){let j=g.observedName,k=b.timeout,l=g.accessibility;if(j&&k){let m=await new(O(c))(b=>{let c=!1,d=!1,e=!1;a.observedElement.waitElement(j,k,l).result.then(a=>{c=!0,!e&&(a||d)&&(e=!0,b({element:a}))}),f.then(a=>{d=!0,!e&&(a||c)&&(e=!0,b({crossOrigin:a}))})});m.element?h=m.element:m.crossOrigin&&(i=m.crossOrigin)}}return h?ak.getElementData(a,h,c,e.ctx,d):i}}class al extends null{constructor(){super(...arguments),this.type=ad.RestoreFocusInDeloser}static async makeResponse(a,b,c,d,e,f){let g=await f,h=!g&&b.beginData,i=h&&h.deloserUId,j=i&&e.ctx.deloserByUId[i],k=a.deloser;if(h&&j&&k){let l=ac.getHistory(k);return h.reset?l.resetFocus(j):l.focusAvailable(j)}return!!g}}class am extends null{constructor(){super(...arguments),this.type=ad.Ping}static shouldForward(){return!1}static async makeResponse(){return!0}}class an{constructor(a,b,c,d,e,f,g){this._tabster=a,this.uid=b,this.ownerId=c,this.id=d,this.rootId=e,this.observedName=f,this.observedDetails=g}focus(a,b){return this._tabster.crossOrigin.focusedElement.focus(this,a,b)}}class ao extends null{constructor(a){super(),this._transactions=a}async focus(a,b,c){return this._focus({uid:a.uid,id:a.id,rootId:a.rootId,ownerId:a.ownerId,observedName:a.observedName},b,c)}async focusById(a,b,c,d){return this._focus({id:a,rootId:b},c,d)}async focusByObservedName(a,b,c,d,e){return this._focus({observedName:a,rootId:c},d,e,b)}async _focus(a,b,c,d){return this._transactions.beginTransaction(ah,{...a,noFocusedProgrammaticallyFlag:b,noAccessibleCheck:c},d).then(a=>!!a)}static setVal(a,b,c){a.setVal(b,c)}}class ap extends null{constructor(a,b){super(),this._lastRequestFocusId=0,this._tabster=a,this._transactions=b}async getElement(a,b){return this.waitElement(a,0,b)}async waitElement(a,b,c){return this._transactions.beginTransaction(ak,{observedName:a,accessibility:c},b).then(a=>a?aj.createElement(this._tabster,a):null)}async requestFocus(a,b){let c=++this._lastRequestFocusId;return this.waitElement(a,b,j.Focusable).then(a=>this._lastRequestFocusId===c&&!!a&&this._tabster.crossOrigin.focusedElement.focus(a,!0))}static trigger(a,b,c){a.trigger(b,c)}}function aq(a,b,c){let d=c.getElement();if(d){let e=J(a,d);return b.deloserByUId[e]||(b.deloserByUId[e]=c),e}}/*!
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */ let ar={Tab:9,Enter:13,Esc:27,Space:32,PageUp:33,PageDown:34,End:35,Home:36,Left:37,Up:38,Right:39,Down:40};/*!
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */ class as extends r{constructor(a,b){super(),this._init=()=>{this._initTimer=void 0;let a=this._win();a.document.addEventListener(d.PW,this._onFocusIn,!0),a.document.addEventListener("focusout",this._onFocusOut,!0),a.addEventListener("keydown",this._onKeyDown,!0)},this._onFocusIn=a=>{this._setFocusedElement(a.target,a.details.relatedTarget||void 0,a.details.isFocusedProgrammatically)},this._onFocusOut=a=>{this._setFocusedElement(void 0,a.relatedTarget||void 0)},this._validateFocusedElement=a=>{},this._onKeyDown=a=>{var b,c,e;if(a.keyCode!==ar.Tab)return;let f=this.getVal();if(!f||!f.ownerDocument||"true"===f.contentEditable)return;let g=this._tabster.controlTab,h=Z.getTabsterContext(this._tabster,f,{checkRtl:!0});if(!h|| !g&&!h.mover&&!h.groupper)return;let i=a.shiftKey,j=as.findNextTabbable(this._tabster,h,f,i);if(!j|| !g&&!j.element){!g&&(h.mover&&(!h.groupper||h.isGroupperFirst)?null===(b=h.mover.dummyManager)|| void 0===b||b.moveOutWithDefaultAction(i):h.groupper&&(null===(c=h.groupper.dummyManager)|| void 0===c||c.moveOutWithDefaultAction(i)));return}let k=j.uncontrolled;if(k){h.uncontrolled!==k&&this._moveToUncontrolled(k,i);return}let l=j.element;if(h.modalizer){let m=l&&Z.getTabsterContext(this._tabster,l);if((!m||h.root.uid!==m.root.uid||!(null===(e=m.modalizer)|| void 0===e?void 0:e.isActive()))&&h.modalizer.onBeforeFocusOut()){a.preventDefault();return}if(!l&&h.modalizer.isActive()&&h.modalizer.getProps().isTrapped){let n=i?"findLast":"findFirst";l=this._tabster.focusable[n]({container:h.modalizer.getElement()})}}l?"IFRAME"!==l.tagName&&(a.preventDefault(),a.stopImmediatePropagation(),(0,d.ev)(l)):h.root.moveOutWithDefaultAction(i)},this._tabster=a,this._win=b,this._initTimer=b().setTimeout(this._init,0)}dispose(){super.dispose();let a=this._win();this._initTimer&&(a.clearTimeout(this._initTimer),this._initTimer=void 0),a.document.removeEventListener(d.PW,this._onFocusIn,!0),a.document.removeEventListener("focusout",this._onFocusOut,!0),a.removeEventListener("keydown",this._onKeyDown,!0),delete as._lastResetElement,delete this._nextVal,delete this._lastVal}static forgetMemorized(a,b){var c,d;let e=as._lastResetElement,f=e&&e.get();f&&b.contains(f)&&delete as._lastResetElement,(f=null===(d=null===(c=a._nextVal)|| void 0===c?void 0:c.element)|| void 0===d?void 0:d.get())&&b.contains(f)&&delete a._nextVal,(f=(e=a._lastVal)&&e.get())&&b.contains(f)&&delete a._lastVal}getFocusedElement(){return this.getVal()}getLastFocusedElement(){var a;let b=null===(a=this._lastVal)|| void 0===a?void 0:a.get();return b&&(!b||M(b.ownerDocument,b))||(this._lastVal=b=void 0),b}focus(a,b,c){return!!this._tabster.focusable.isFocusable(a,b,!1,c)&&(a.focus(),!0)}focusDefault(a){let b=this._tabster.focusable.findDefault({container:a});return!!b&&(this._tabster.focusedElement.focus(b),!0)}focusFirst(a){let b=a.container,c;if(b){let d=Z.getTabsterContext(this._tabster,b,{checkRtl:!0});if(d){let e=as.findNextTabbable(this._tabster,d,b);e&&!e.uncontrolled&&(c=e.element)}}return c||(c=this._tabster.focusable.findFirst(a))||(c=this._tabster.focusable.findFirst({...a,ignoreUncontrolled:!0,ignoreAccessibiliy:!0})),!!c&&(this.focus(c,!1,!0),!0)}focusLast(a){let b=a.container,c;if(b){let d=Z.getTabsterContext(this._tabster,b,{checkRtl:!0});if(d){let e=as.findNextTabbable(this._tabster,d,W(b),!0);e&&!e.uncontrolled&&(c=e.element)}}return c||(c=this._tabster.focusable.findLast(a))||(c=this._tabster.focusable.findLast({...a,ignoreUncontrolled:!0,ignoreAccessibiliy:!0})),!!c&&(this.focus(c,!1,!0),!0)}resetFocus(a){if(!this._tabster.focusable.isVisible(a))return!1;if(this._tabster.focusable.isFocusable(a,!0,!0,!0))this.focus(a);else{let b=a.getAttribute("tabindex"),c=a.getAttribute("aria-hidden");a.tabIndex=-1,a.setAttribute("aria-hidden","true"),as._lastResetElement=new z(this._win,a),this.focus(a,!0,!0),this._setOrRemoveAttribute(a,"tabindex",b),this._setOrRemoveAttribute(a,"aria-hidden",c)}return!0}_setOrRemoveAttribute(a,b,c){null===c?a.removeAttribute(b):a.setAttribute(b,c)}_setFocusedElement(a,b,c){var d;if(this._tabster._noop)return;let e={relatedTarget:b};if(a){let f=null===(d=as._lastResetElement)|| void 0===d?void 0:d.get();if(as._lastResetElement=void 0,f===a||H(a))return;e.isFocusedProgrammatically=c}let g=this._nextVal={element:a?new z(this._win,a):void 0,details:e};a&&a!==this._val&&this._validateFocusedElement(a),this._nextVal===g&&this.setVal(a,e),this._nextVal=void 0}setVal(a,b){super.setVal(a,b),a&&(this._lastVal=new z(this._win,a))}static findNextTabbable(a,b,c,d){let e=null,f;if(c)f=c;else{let g=b.root.getElement();if(!g)return null;f=W(g)||g}let h=a=>{e=a.findNextTabbable(f,d)};if(b.groupper&&b.mover){let i=b.isGroupperFirst;if(i){let j=Z.getTabsterContext(a,f);(null==j?void 0:j.groupper)!==b.groupper&&(i=!1)}i?(h(b.groupper),null===e&&h(b.mover)):(h(b.mover),null===e&&h(b.groupper))}else if(b.groupper)h(b.groupper);else if(b.mover)h(b.mover);else{let k,l=a=>{k=a},m=d?a.focusable.findPrev({currentElement:f,onUncontrolled:l}):a.focusable.findNext({currentElement:f,onUncontrolled:l});e={element:m,uncontrolled:k}}return e}_moveToUncontrolled(a,b){let c=new S(this._win,{isPhantom:!0,isFirst:!0}),e=c.input;if(e){let f=a.parentElement;f&&(f.insertBefore(e,b?a.nextElementSibling:a),(0,d.ev)(e))}}}class at extends R{constructor(a,b,c,d){super(a,b,d),this._shouldTabInside=!1,this.makeTabbable(!1),this._onDispose=c,a.controlTab||(this.dummyManager=new /*!
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */ class extends U{constructor(a,b){super(b,a,T.Groupper),this._setHandlers(c=>{let d=a.get();d&&!c.shouldMoveOut&&(c.isFirst?b.focusedElement.focusFirst({container:d}):b.focusedElement.focusLast({container:d}))})}}(this._element,a))}dispose(){var a;this._onDispose(this),this._element.get(),null===(a=this.dummyManager)|| void 0===a||a.dispose(),delete this._first}findNextTabbable(a,b){let c=this.getElement();if(!c||!c.contains(a))return null;let d=this._tabster,e=null,f,g=a=>{f=a};if(this._shouldTabInside){let h=this.getFirst();if(h){let i=b?h:W(h),j;if(i){let k=b?d.focusable.findPrev({container:c,currentElement:i,ignoreUncontrolled:!0}):d.focusable.findNext({container:c,currentElement:i,ignoreUncontrolled:!0});j=k?c:h}else j=c;!j||(e=b?d.focusable.findPrev({container:j,currentElement:a,onUncontrolled:g}):d.focusable.findNext({container:j,currentElement:a,onUncontrolled:g}),f||e||this._props.tabbability!==n.LimitedTrapFocus||(e=b?d.focusable.findLast({container:j}):d.focusable.findFirst({container:j})))}}if(null===e){let l=c.parentElement;if(l){let m=Z.getTabsterContext(d,l);if(m)return as.findNextTabbable(d,m,a,b)}}return{element:e,uncontrolled:f}}makeTabbable(a){this._shouldTabInside=a}shouldTabInside(){return this._shouldTabInside}isActive(){var a;let b=this.getElement()||null,c=!0;for(let d=null==b?void 0:b.parentElement;d;d=d.parentElement){let e=null===(a=p(this._tabster,d))|| void 0===a?void 0:a.groupper;e&&!e._shouldTabInside&&(c=!1)}return c?!!this._props.tabbability&&this._shouldTabInside:void 0}getFirst(){var a;let b=this.getElement(),c;return!b||(c=null===(a=this._first)|| void 0===a?void 0:a.get())||(c=(this._tabster.focusable.isFocusable(b)?b:this._tabster.focusable.findFirst({container:b,ignoreUncontrolled:!0}))||void 0),c}setFirst(a){a?this._first=new z(this._tabster.getWindow,a):delete this._first}acceptElement(a,b){let{grouppers:c,container:d}=b,e=c[this.id];if(!e){let f=this.isActive(),g=this.getElement();if(g){let h=g!==d&&d.contains(g);if(e=c[this.id]={isInside:h,isActive:f},h&& !0!==f){let i=this.getFirst();if(i&&b.acceptCondition(i)){let j=this._tabster.focusedElement.getFocusedElement();e.first=i,j&&this.setFirst(g.contains(j)?void 0:i)}}}}if(e.isInside){if(void 0===e.isActive&&!(b.isFindAll&&e.first&&(e.first===a||a===this.getElement())))return NodeFilter.FILTER_REJECT;if(!1===e.isActive)return e.first===a?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}}}class au{constructor(a,b){this._current={},this._grouppers={},this._init=()=>{this._initTimer=void 0;let a=this._win();this._tabster.focusedElement.subscribe(this._onFocus),a.document.addEventListener("mousedown",this._onMouseDown,!0),a.addEventListener("keydown",this._onKeyDown,!0)},this._onGroupperDispose=a=>{delete this._grouppers[a.id]},this._onFocus=a=>{a&&this._updateCurrent(a,!1,!0)},this._onMouseDown=a=>{a.target&&this._updateCurrent(a.target,!0)},this._onKeyDown=a=>{var b;if(a.keyCode!==ar.Enter&&a.keyCode!==ar.Esc)return;let c=this._tabster.focusedElement.getFocusedElement();if(c){let e=Z.getTabsterContext(this._tabster,c),f=null==e?void 0:e.groupper;if(e&&f){let g;if(a.keyCode===ar.Enter){let h=f.getFirst();if(h!==c||f.isActive())return;(g=this._tabster.focusable.findFirst({container:h,ignoreGroupper:!0}))&&this._updateCurrent(g)}else if(a.keyCode===ar.Esc)for(let i=c;i;i=i.parentElement){let j=null===(b=p(this._tabster,i))|| void 0===b?void 0:b.groupper;if(j){let k=j.getProps();if(k.ignoreEsc)return;if((j.isActive()||!k.tabbability)&&(j.makeTabbable(!1),g=j.getFirst()))break}}g&&(a.preventDefault(),a.stopImmediatePropagation(),(0,d.ev)(g))}}},this._tabster=a,this._win=b,this._initTimer=b().setTimeout(this._init,0)}dispose(){let a=this._win();this._current={},this._initTimer&&(a.clearTimeout(this._initTimer),this._initTimer=void 0),this._tabster.focusedElement.unsubscribe(this._onFocus),a.document.removeEventListener("mousedown",this._onMouseDown,!0),a.removeEventListener("keydown",this._onKeyDown,!0),Object.keys(this._grouppers).forEach(a=>{this._grouppers[a]&&(this._grouppers[a].dispose(),delete this._grouppers[a])})}createGroupper(a,b){let c=new at(this._tabster,a,this._onGroupperDispose,b);return this._grouppers[c.id]=c,c}forgetCurrentGrouppers(){this._current={}}_updateCurrent(a,b,c){var d;let e={},f=!0;for(let g=a;g;g=g.parentElement){let h=null===(d=p(this._tabster,g))|| void 0===d?void 0:d.groupper;h&&(e[h.id]=!0,f&&c&&!h.shouldTabInside()&&(!h.getProps().tabbability||g!==a&&(this._tabster.focusable.isFocusable(g)||a!==h.getFirst()))&&(f=!1),(b||!f)&&(this._current[h.id]=h,h.makeTabbable(!0)),f=!1)}for(let i of Object.keys(this._current)){let j=this._current[i];j.id in e||(j.makeTabbable(!1),j.setFirst(void 0),delete this._current[i])}}}/*!
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */ let av=0;class aw extends null{constructor(a,b,c,d,e,f){super(a,b,f),this._isFocused=!1,this._onKeyDown=a=>{let b=a.keyCode,c=a.shiftKey;if(b!==ar.Tab)return;let d=this._tabster.focusedElement.getFocusedElement(),e=this.getElement(),f=c?"findPrev":"findNext",g;d&&(null==e?void 0:e.contains(d))&&(g=this._tabster.focusable[f]({container:this.getElement(),currentElement:d})),!g&&this._props.isTrapped&&(f=c?"findLast":"findFirst",g=this._tabster.focusable[f]({container:this.getElement()})),g?(a.preventDefault(),a.stopImmediatePropagation(),nativeFocus(g)):this._props.isOthersAccessible||this._moveOutWithDefault(c)},this.internalId="ml"+ ++av,this.userId=f.id,this._onDispose=c,this._moveOutWithDefault=d,this._onActiveChange=e,a.controlTab||b.addEventListener("keydown",this._onKeyDown);let g=b.parentElement;g?this._modalizerParent=new z(a.getWindow,g):this._modalizerParent=null,this._setAccessibilityProps()}setProps(a){a.id&&(this.userId=a.id),this._props={...a},this._setAccessibilityProps()}dispose(){this._onDispose(this),this._remove()}setActive(a){var b,c,d;if(a===this._isActive)return;this._isActive=a,this._onActiveChange(a);let e=(null===(b=this._element.get())|| void 0===b?void 0:b.ownerDocument)||(null===(d=null===(c=this._modalizerParent)|| void 0===c?void 0:c.get())|| void 0===d?void 0:d.ownerDocument);e||(e=this._tabster.getWindow().document);let f=e.body,g=C(e,f,b=>{var c;if(this._props.isOthersAccessible)return NodeFilter.FILTER_REJECT;let d=this._element.get(),e=null===(c=this._modalizerParent)|| void 0===c?void 0:c.get(),f=!!b.contains(d||null),g=!!b.contains(e||null);if(d===b)return NodeFilter.FILTER_REJECT;if(f||g)return NodeFilter.FILTER_SKIP;!function(a,b,c,d){let e=a.storageEntry(b,!0);if(!e.aug){if(void 0===d)return;e.aug={}}if(void 0===d){if(c in e.aug){let f=e.aug[c];delete e.aug[c],null===f?b.removeAttribute(c):b.setAttribute(c,f)}}else c in e.aug||(e.aug[c]=b.getAttribute(c)),null===d?b.removeAttribute(c):b.setAttribute(c,d);void 0===d&&0===Object.keys(e.aug).length&&(delete e.aug,a.storageEntry(b,!1))}(this._tabster,b,"aria-hidden",a?"true":void 0);let h=d!==(null==d?void 0:d.ownerDocument.body)&&(null==d?void 0:d.ownerDocument.body.contains(d)),i=e!==(null==e?void 0:e.ownerDocument.body)&&(null==e?void 0:e.ownerDocument.body.contains(e));return i||h?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_SKIP});if(g)for(;g.nextNode(););}isActive(){return!!this._isActive}contains(a){var b;return!!(null===(b=this.getElement())|| void 0===b?void 0:b.contains(a))}onBeforeFocusOut(){let a=this.getElement();return!!a&&!X(a,h,{eventName:"beforefocusout"})}_remove(){}_setAccessibilityProps(){}}class ax extends null{constructor(a,b,c,d){super(a,b,d),this._visible={},this._isFindingTabbable=!1,this._isNestedCall=!1,this._onIntersection=a=>{for(let b of a){let c=b.target,d=J(this._win,c),e,f=this._fullyVisible;if(b.intersectionRatio>=.25&&(e=b.intersectionRatio>=.75?l.Visible:l.PartiallyVisible)===l.Visible&&(f=d),this._visible[d]!==e){void 0===e?(delete this._visible[d],f===d&&delete this._fullyVisible):(this._visible[d]=e,this._fullyVisible=f);let g=this.getState(c);g&&X(c,i,g)}}},this._win=a.getWindow,(this._props.trackState||this._props.visibilityAware)&&(this._intersectionObserver=new IntersectionObserver(this._onIntersection,{threshold:[0,.25,.5,.75,1]}),this._observeState()),this._onDispose=c;let e=()=>d.memorizeCurrent?this._current:void 0;a.controlTab||(this.dummyManager=new class extends null{constructor(a,b,c){super(b,a,T.Mover),this._onFocusDummyInput=a=>{var b,c;let d=this._element.get(),e=a.input;if(d&&!a.shouldMoveOut&&e){let f=Z.getTabsterContext(this._tabster,d),g;f&&(g=null===(b=as.findNextTabbable(this._tabster,f,e,!a.isFirst))|| void 0===b?void 0:b.element);let h=null===(c=this._getMemorized())|| void 0===c?void 0:c.get();h&&(g=h),g&&nativeFocus(g)}},this._tabster=b,this._getMemorized=c,this._setHandlers(this._onFocusDummyInput)}}(this._element,a,e))}dispose(){var a;this._onDispose(this),this._intersectionObserver&&(this._intersectionObserver.disconnect(),delete this._intersectionObserver),delete this._current,delete this._fullyVisible,delete this._allElements,delete this._updateQueue,this._unobserve&&(this._unobserve(),delete this._unobserve);let b=this._win();this._setCurrentTimer&&(b.clearTimeout(this._setCurrentTimer),delete this._setCurrentTimer),this._updateTimer&&(b.clearTimeout(this._updateTimer),delete this._updateTimer),null===(a=this.dummyManager)|| void 0===a||a.dispose()}setCurrent(a){a?this._current=new z(this._win,a):this._current=void 0,(this._props.trackState||this._props.visibilityAware)&&!this._setCurrentTimer&&(this._setCurrentTimer=this._win().setTimeout(()=>{var a;delete this._setCurrentTimer;let b=[];for(let c of(this._current!==this._prevCurrent&&(b.push(this._current),b.push(this._prevCurrent),this._prevCurrent=this._current),b)){let d=null==c?void 0:c.get();if(d&&(null===(a=this._allElements)|| void 0===a?void 0:a.get(d))===this){let e=this._props;if(d&&(void 0!==e.visibilityAware||e.trackState)){let f=this.getState(d);f&&X(d,i,f)}}}}))}getCurrent(){var a;return(null===(a=this._current)|| void 0===a?void 0:a.get())||null}findNextTabbable(a,b){var c,d;let e=this.getElement(),f=e&&(null===(d=null===(c=a)|| void 0===c?void 0:c.__tabsterDummyContainer)|| void 0===d?void 0:d.get())===e;if(!e|| !e.contains(a)&&!f)return this._isFindingTabbable=!1,null;let g=this._tabster,h=g.focusable,i=null,j,k=a=>{j=a};if(this._isFindingTabbable=!0,(this._props.tabbable||f)&&(i=b?h.findPrev({currentElement:a,container:e,onUncontrolled:k}):h.findNext({currentElement:a,container:e,onUncontrolled:k})),null===i){let l=e.parentElement;if(l){let m=Z.getTabsterContext(g,l);if(m){let n=b?e:W(e)||e,o=as.findNextTabbable(g,m,n,b);return this._isFindingTabbable=!1,o}}}return this._isFindingTabbable=!1,{element:i,uncontrolled:j}}acceptElement(a,b){var c,d,e,f,g;let h=null===(c=b.currentCtx)|| void 0===c?void 0:c.allMoversGrouppers;if(h&&h.moverCount>1){let i=h.instances;for(let j=i.length;j--;){let k=i[j];if(k.isMover&&k.mover!==this){let m=k.mover.getElement();if(m){if(b.container.contains(m)&&b.isFindAll)return NodeFilter.FILTER_REJECT;break}}}}if(b.isFindAll)return;let{memorizeCurrent:n,visibilityAware:o}=this._props;if((null===(d=b.currentCtx)|| void 0===d?void 0:d.isExcludedFromMover)&&!this._isFindingTabbable)return NodeFilter.FILTER_REJECT;if(n||o){let p=this.getElement();if(p){if(n){let q=null===(e=this._current)|| void 0===e?void 0:e.get();if(q&&b.acceptCondition(q)&&b.from&&!p.contains(b.from))return b.found=!0,b.foundElement=q,NodeFilter.FILTER_ACCEPT}if(!this._isNestedCall&&o&&(!p.contains(b.from)||this._isFindingTabbable&&(null===(g=null===(f=b.from)|| void 0===f?void 0:f.__tabsterDummyContainer)|| void 0===g?void 0:g.get())===p)){this._isNestedCall=!0;let r=this.getElement(),s=this._tabster.focusable.findElement({container:r,ignoreUncontrolled:!0,prev:!b.isForward,acceptCondition:a=>{var c;let d=J(this._win,a),e=this._visible[d];return r!==a&&!!(null===(c=this._allElements)|| void 0===c?void 0:c.get(a))&&b.acceptCondition(a)&&(e===l.Visible||e===l.PartiallyVisible&&(o===l.PartiallyVisible||!this._fullyVisible))}});if(this._isNestedCall=!1,s)return b.found=!0,b.foundElement=s,NodeFilter.FILTER_ACCEPT}}}}_observeState(){let a=this.getElement();if(this._unobserve||!a||"undefined"==typeof MutationObserver)return;let b=this._win(),c=this._allElements=new WeakMap,d=this._tabster.focusable,e=this._updateQueue=[],f=new MutationObserver(a=>{for(let b of a){let c=b.target,d=b.removedNodes,f=b.addedNodes;if("attributes"===b.type)"tabindex"===b.attributeName&&e.push({element:c,type:2});else{for(let g=0;g<d.length;g++)e.push({element:d[g],type:3});for(let h=0;h<f.length;h++)e.push({element:f[h],type:1})}}k()}),g=(a,b)=>{var d,e;let f=c.get(a);f&&b&&(null===(d=this._intersectionObserver)|| void 0===d||d.unobserve(a),c.delete(a)),f||b||(c.set(a,this),null===(e=this._intersectionObserver)|| void 0===e||e.observe(a))},h=a=>{let b=d.isFocusable(a),e=c.get(a);e?b||g(a,!0):b&&g(a)},i=a=>{let{mover:c}=l(a);if(c&&c!==this){if(!(c.getElement()===a&&d.isFocusable(a)))return;g(a)}let e=C(b.document,a,a=>{let{mover:b,groupper:c}=l(a);return b&&b!==this||c&&(c.getElement()!==a||!d.isFocusable(a))?NodeFilter.FILTER_REJECT:(d.isFocusable(a)&&g(a),NodeFilter.FILTER_SKIP)});if(e)for(e.currentNode=a;e.nextNode(););},j=a=>{let b=c.get(a);b&&g(a,!0);for(let d=a.firstElementChild;d;d=d.nextElementSibling)j(d)},k=()=>{!this._updateTimer&&e.length&&(this._updateTimer=b.setTimeout(()=>{for(let{element:a,type:b}of(delete this._updateTimer,e))switch(b){case 2:h(a);break;case 1:i(a);break;case 3:j(a)}e=this._updateQueue=[]},0))},l=a=>{let b={};for(let c=a;c;c=c.parentElement){let d=p(this._tabster,c);if(d&&(d.groupper&&!b.groupper&&(b.groupper=d.groupper),d.mover)){b.mover=d.mover;break}}return b};e.push({element:a,type:1}),k(),f.observe(a,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["tabindex"]}),this._unobserve=()=>{f.disconnect()}}getState(a){let b=J(this._win,a);if(b in this._visible){let c=this._visible[b]||l.Invisible,d=this._current?this._current.get()===a:void 0;return{isCurrent:d,visibility:c}}}}/*!
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */ let ay={areaClass:"tabster-focus-outline-area",outlineClass:"tabster-focus-outline",outlineColor:"#ff4500",outlineWidth:2,zIndex:2147483647},az=null,aA,aB;"undefined"!=typeof document&&("onfullscreenchange"in document?(aA="fullscreenchange",aB="fullscreenElement"):"onwebkitfullscreenchange"in document?(aA="webkitfullscreenchange",aB="webkitFullscreenElement"):"onmozfullscreenchange"in document?(aA="mozfullscreenchange",aB="mozFullScreenElement"):"onmsfullscreenchange"in document&&(aA="msfullscreenchange",aB="msFullscreenElement"));class aC{constructor(a,b,c,d){this.left=a,this.top=b,this.right=c,this.bottom=d}equalsTo(a){return this.left===a.left&&this.top===a.top&&this.right===a.right&&this.bottom===a.bottom}clone(){return new aC(this.left,this.top,this.right,this.bottom)}}class aD{constructor(a){this._isVisible=!1,this._allOutlineElements=[],this._init=()=>{this._initTimer=void 0,this._tabster.keyboardNavigation.subscribe(this._onKeyboardNavigationStateChanged),this._tabster.focusedElement.subscribe(this._onFocus);let a=this._win();a.addEventListener("scroll",this._onScroll,!0),aA&&a.document.addEventListener(aA,this._onFullScreenChanged)},this._onFullScreenChanged=a=>{if(!aB||!a.target)return;let b=a.target.body||a.target,c=this._getDOM(b);if(b.ownerDocument&&c){let d=b.ownerDocument[aB];d?(d.appendChild(c.container),this._fullScreenElement=d):(b.ownerDocument.body.appendChild(c.container),this._fullScreenElement=void 0)}},this._onKeyboardNavigationStateChanged=()=>{this._onFocus(this._tabster.focusedElement.getFocusedElement())},this._onFocus=a=>{!this._updateElement(a)&&this._isVisible&&this._setVisibility(!1)},this._onScroll=a=>{this._outlinedElement&&aD._isParentChild(a.target,this._outlinedElement)&&(this._curPos=void 0,this._setOutlinePosition())},this._tabster=a,this._win=a.getWindow,this._initTimer=this._win().setTimeout(this._init,0)}setup(a){az={...az,...a};let b=this._win();b.__tabsterOutline||(b.__tabsterOutline={}),b.__tabsterOutline.style||(b.__tabsterOutline.style=aE(b.document,az)),a&&a.areaClass?b.document.body.classList.remove(ay.areaClass):b.document.body.classList.add(ay.areaClass)}dispose(){let a=this._win();this._initTimer&&(a.clearTimeout(this._initTimer),this._initTimer=void 0),this._updateTimer&&(a.clearTimeout(this._updateTimer),this._updateTimer=void 0),this._tabster.keyboardNavigation.unsubscribe(this._onKeyboardNavigationStateChanged),this._tabster.focusedElement.unsubscribe(this._onFocus),a.removeEventListener("scroll",this._onScroll,!0),aA&&a.document.removeEventListener(aA,this._onFullScreenChanged),this._allOutlineElements.forEach(a=>this._removeDOM(a.container)),this._allOutlineElements=[],delete this._outlinedElement,delete this._curPos,delete this._curOutlineElements,delete this._fullScreenElement}_shouldShowCustomOutline(a){let b=p(this._tabster,a);if(b&&b.outline&&b.outline.isIgnored)return!1;for(let c=a;c;c=c.parentElement)if(c.classList&&c.classList.contains(az.areaClass))return!0;return!1}_updateElement(a){if(this._outlinedElement=void 0,this._updateTimer&&(this._win().clearTimeout(this._updateTimer),this._updateTimer=void 0),this._curPos=void 0,!this._tabster.keyboardNavigation.isNavigatingWithKeyboard())return!1;if(a){if("INPUT"===a.tagName){let b=a.type,c={button:!0,checkbox:!0,file:!0,image:!0,radio:!0,range:!0,reset:!0,submit:!0};if(!(b in c))return!1}else if("TEXTAREA"===a.tagName||"true"===a.contentEditable||"IFRAME"===a.tagName)return!1;return!!this._shouldShowCustomOutline(a)&&(this._tabster.keyboardNavigation.isNavigatingWithKeyboard()&&(this._outlinedElement=a,this._updateOutline()),!0)}return!1}_updateOutline(){this._setOutlinePosition(),this._updateTimer&&(this._win().clearTimeout(this._updateTimer),this._updateTimer=void 0),this._outlinedElement&&(this._updateTimer=this._win().setTimeout(()=>{this._updateTimer=void 0,this._updateOutline()},30))}_setVisibility(a){this._isVisible=a,this._curOutlineElements&&(a?this._curOutlineElements.container.classList.add(az.outlineClass+"_visible"):(this._curOutlineElements.container.classList.remove(az.outlineClass+"_visible"),this._curPos=void 0))}_setOutlinePosition(){if(!this._outlinedElement)return;let a=D(this._win,this._outlinedElement),b=new aC(a.left,a.top,a.right,a.bottom);if(this._curPos&&b.equalsTo(this._curPos))return;let c=this._getDOM(this._outlinedElement),d=this._outlinedElement.ownerDocument&&this._outlinedElement.ownerDocument.defaultView;if(!c||!d)return;this._curOutlineElements!==c&&(this._setVisibility(!1),this._curOutlineElements=c),this._curPos=b;let e=b.clone(),f=!1,g=!1,h=c.container,i=h&&h.ownerDocument&&h.ownerDocument.scrollingElement;if(!i)return;for(let j=this._outlinedElement.parentElement;j&&j!==this._fullScreenElement;j=j.parentElement){a=D(this._win,j);let k=j.ownerDocument&&j.ownerDocument.defaultView;if(!k)return;let l=k.getComputedStyle(j),m=l.position;"absolute"===m?f=!0:("fixed"===m||"sticky"===m)&&(g=!0),"visible"!==l.overflow&&((f||g)&&"hidden"!==l.overflow||(a.left>e.left&&(e.left=a.left),a.top>e.top&&(e.top=a.top),a.right<e.right&&(e.right=a.right),a.bottom<e.bottom&&(e.bottom=a.bottom)))}let n=D(this._win,i),o=n.left+n.right,p=n.top+n.bottom,q=az.outlineWidth;e.left=e.left>q?e.left-q:0,e.top=e.top>q?e.top-q:0,e.right=e.right<o-q?e.right+q:o,e.bottom=e.bottom<p-q?e.bottom+q:p;let r=e.right-e.left,s=e.bottom-e.top;if(r>2*q&&s>2*q){let t=c.left,u=c.top,v=c.right,w=c.bottom,x=this._fullScreenElement||g?0:d.pageXOffset,y=this._fullScreenElement||g?0:d.pageYOffset;h.style.position=g?"fixed":"absolute",h.style.background=az.outlineColor,t.style.width=v.style.width=u.style.height=w.style.height=az.outlineWidth+"px",t.style.left=u.style.left=w.style.left=e.left+x+"px",v.style.left=e.left+x+r-q+"px",t.style.top=v.style.top=u.style.top=e.top+y+"px",w.style.top=e.top+y+s-q+"px",t.style.height=v.style.height=s+"px",u.style.width=w.style.width=r+"px",this._setVisibility(!0)}else this._setVisibility(!1)}_getDOM(a){let b=a.ownerDocument,c=b&&b.defaultView;if(b&&c&&c.__tabsterOutline){if(c.__tabsterOutline.style||(c.__tabsterOutline.style=aE(b,az)),!c.__tabsterOutline.elements){let d={container:b.createElement("div"),left:b.createElement("div"),top:b.createElement("div"),right:b.createElement("div"),bottom:b.createElement("div")};d.container.className=az.outlineClass,d.left.className=az.outlineClass+"__left",d.top.className=az.outlineClass+"__top",d.right.className=az.outlineClass+"__right",d.bottom.className=az.outlineClass+"__bottom",d.container.appendChild(d.left),d.container.appendChild(d.top),d.container.appendChild(d.right),d.container.appendChild(d.bottom),b.body.appendChild(d.container),c.__tabsterOutline.elements=d,this._allOutlineElements.push(d)}return c.__tabsterOutline.elements}}_removeDOM(a){let b=a.ownerDocument&&a.ownerDocument.defaultView,c=b&&b.__tabsterOutline;if(!c)return;c.style&&c.style.parentNode&&(c.style.parentNode.removeChild(c.style),delete c.style);let d=c&&c.elements;d&&(d.container.parentNode&&d.container.parentNode.removeChild(d.container),delete c.elements)}static _isParentChild(a,b){return b===a||!!(a.compareDocumentPosition(b)&document.DOCUMENT_POSITION_CONTAINED_BY)}}function aE(a,b){let c=a.createElement("style");return c.type="text/css",c.appendChild(a.createTextNode(aF(b))),a.head.appendChild(c),c}function aF(a){return"\n."+a.areaClass+" *, ."+a.areaClass+" *:focus {\noutline: none !important;\n}\n\n."+a.outlineClass+" {\ndisplay: none;\nposition: absolute;\nwidth: 0;\nheight: 0;\nleft: 0;\ntop: 0;\nz-index: "+a.zIndex+";\n}\n\n."+a.outlineClass+"."+a.outlineClass+"_visible {\ndisplay: block;\n}\n\n."+a.outlineClass+"__left,\n."+a.outlineClass+"__top,\n."+a.outlineClass+"__right,\n."+a.outlineClass+"__bottom {\nposition: absolute;\nbackground: inherit;\n}"}/*!
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */ class aG{constructor(a,b){var c;this._forgetMemorizedElements=[],this._version="1.5.4",this._noop=!1,this.getWindow=()=>{if(!this._win)throw Error("Using disposed Tabster.");return this._win},this._storage=function(a){let b=a.__tabsterInstanceContext;return new((null==b?void 0:b.basics.WeakMap)||WeakMap)}(a),this._win=a;let d=this.getWindow;this.keyboardNavigation=new s(d),this.focusedElement=new as(this,d),this.focusable=new class{constructor(a,b){this._tabster=a,this._win=b}dispose(){}_getBody(){let a=this._tabster.focusedElement.getLastFocusedElement();return a&&a.ownerDocument?a.ownerDocument.body:this._win().document.body}getProps(a){let b=p(this._tabster,a);return b&&b.focusable||{}}isFocusable(a,b,c,d){return!!N(a,"a[href], button:not([disabled]), input:not([disabled]), select:not([disabled]), textarea:not([disabled]), *[tabindex], *[contenteditable]")&&(!!b|| -1!==a.tabIndex)&&(c||this.isVisible(a))&&(d||this.isAccessible(a))}isVisible(a){if(!a.ownerDocument||null===a.offsetParent&&a.ownerDocument.body!==a)return!1;let b=a.ownerDocument.defaultView;if(!b)return!1;let c=a.ownerDocument.body.getBoundingClientRect();if(0===c.width&&0===c.height)return!1;let d=b.getComputedStyle(a);return"hidden"!==d.visibility}isAccessible(a){var b;for(let c=a;c;c=c.parentElement){let d=p(this._tabster,c);if(this._isHidden(c))return!1;let e=null===(b=null==d?void 0:d.focusable)|| void 0===b?void 0:b.ignoreAriaDisabled;if(!e&&this._isDisabled(c))return!1}return!0}_isDisabled(a){return a.hasAttribute("disabled")}_isHidden(a){let b=a.getAttribute("aria-hidden");return!!b&&"true"===b.toLowerCase()}findFirst(a){return this.findElement({container:this._getBody(),...a})}findLast(a){return this.findElement({container:this._getBody(),prev:!0,...a})}findNext(a){return this.findElement({container:this._getBody(),...a})}findPrev(a){return this.findElement({container:this._getBody(),prev:!0,...a})}findDefault(a){return this.findElement({...a,acceptCondition:b=>this._tabster.focusable.isFocusable(b,a.includeProgrammaticallyFocusable)&&!!this.getProps(b).isDefault})||null}findAll(a){let{container:b,acceptCondition:c,includeProgrammaticallyFocusable:d,ignoreGroupper:e,ignoreUncontrolled:f,ignoreAccessibiliy:g,skipDefaultCheck:h}=a,i=a=>{let b,e=!1;return(b=!!h||this._tabster.focusable.isFocusable(a,d))&&(e=!c||c(a)),b&&e},j={container:b,from:null,isForward:!0,acceptCondition:i,includeProgrammaticallyFocusable:d,ignoreGroupper:e,ignoreUncontrolled:f,ignoreAccessibiliy:g,grouppers:{},isFindAll:!0},k=C(b.ownerDocument,b,a=>this._acceptElement(a,j)),l=null==k?void 0:k.filter;if(!k||!l)return[];let m=[],n;for(;n=k.nextNode();)m.push(n);return m}findElement(a){var b,c;let{container:d,currentElement:e=null,includeProgrammaticallyFocusable:f,ignoreGroupper:g,ignoreUncontrolled:h,ignoreAccessibiliy:i,prev:j,onUncontrolled:k}=a,{acceptCondition:l}=a;if(!d||!d.ownerDocument||e&&d!==e&&!d.contains(e)&&(null===(c=null===(b=e)|| void 0===b?void 0:b.__tabsterDummyContainer)|| void 0===c?void 0:c.get())!==d)return null;l||(l=a=>this._tabster.focusable.isFocusable(a,f,i,i));let m={container:d,from:e,isForward:!j,acceptCondition:l,includeProgrammaticallyFocusable:f,ignoreGroupper:g,ignoreUncontrolled:h,ignoreAccessibiliy:i,grouppers:{}},n=C(d.ownerDocument,d,a=>this._acceptElement(a,m));if(!n)return null;if(e)n.currentNode=e;else if(j){let o=W(d);if(!o)return null;if(this._acceptElement(o,m)===NodeFilter.FILTER_ACCEPT)return o;n.currentNode=o}let p=j?n.previousNode():n.nextNode(),q=m.nextUncontrolled;return q&&(p=p?void 0:null,k&&k(q)),m.found?m.foundElement:p}_acceptElement(a,b){var c,d;if(a===b.container)return NodeFilter.FILTER_SKIP;if(b.found)return NodeFilter.FILTER_ACCEPT;let e=b.currentCtx=Z.getTabsterContext(this._tabster,a,{allMoversGrouppers:!0});if(!e)return NodeFilter.FILTER_SKIP;if(b.ignoreUncontrolled){if(H(a))return NodeFilter.FILTER_SKIP}else if(e.groupper)b.nextGroupper=e.groupper.getElement();else if(e.mover)b.nextMover=e.mover.getElement();else if(e.uncontrolled&&!b.nextUncontrolled&&!e.groupper&&!e.mover)return b.nextUncontrolled=e.uncontrolled,NodeFilter.FILTER_REJECT;if("IFRAME"===a.tagName||"WEBVIEW"===a.tagName)return NodeFilter.FILTER_ACCEPT;if(!b.ignoreAccessibiliy&&!this.isAccessible(a))return NodeFilter.FILTER_REJECT;if(!b.ignoreGroupper){let f=b.from,g=b.fromCtx;f&&!g&&(g=b.fromCtx=Z.getTabsterContext(this._tabster,f));let h=e.groupper,i=e.mover,j=e.isGroupperFirst,k=e.allMoversGrouppers;if(k&&!b.isFindAll){let l,m;g&&(l=g.mover,m=g.groupper);let n,o;for(let p of k.instances)if(p.isMover){if(!n){let q=p.mover.getElement(),r=(null==l?void 0:l.getElement())||b.container;q&&r.contains(q)&&(n=p.mover)}}else if(!o){let s=p.groupper.getElement(),t=(null==m?void 0:m.getElement())||b.container;s&&t.contains(s)&&(o=p.groupper)}if(n&&(i=n),o&&(h=o),i&&h){let u=i.getElement();j=u&&!(null===(c=h.getElement())|| void 0===c?void 0:c.contains(u))}else j=!1}if(i&&h&&j&&f){let v=i.getElement();v&&(null===(d=f.__tabsterDummyContainer)|| void 0===d?void 0:d.get())===v&&!v.contains(f)&&(j=!1)}if(h&&j?i=void 0:i&&!j&&(h=void 0),h){let w=h.acceptElement(a,b);if(void 0!==w)return w}if(i){let x=i.acceptElement(a,b);if(void 0!==x)return x}}let y=b.acceptCondition(a);return!y||b.isFindAll||b.isForward||(b.found=!0,b.foundElement=a),y?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}}(this,d),this.root=new Z(this,null==b?void 0:b.autoRoot),this.uncontrolled=new /*!
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */ class{constructor(){}},this.controlTab=null===(c=null==b?void 0:b.controlTab)|| void 0===c||c,this.rootDummyInputs=!!(null==b?void 0:b.rootDummyInputs),this.internal={stopObserver:()=>{this._unobserve&&(this._unobserve(),delete this._unobserve)},resumeObserver:a=>{if(!this._unobserve){let b=d().document;this._unobserve=/*!
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */ function(a,b,c,d){if("undefined"==typeof MutationObserver)return()=>{};let f=b.getWindow,g,h=a=>{for(let d of a){let f=d.target,g=d.removedNodes,h=d.addedNodes;if("attributes"===d.type)d.attributeName===e&&c(b,f);else{for(let j=0;j<g.length;j++)i(g[j],!0);for(let k=0;k<h.length;k++)i(h[k])}}};function i(b,c){g||(g=x(f).elementByUId),j(b,c);let d=C(a,b,a=>j(a,c));if(d)for(;d.nextNode(););}function j(a,d){var h;if(!a.getAttribute)return NodeFilter.FILTER_SKIP;let i=a.__tabsterElementUID;return i&&g&&(d?delete g[i]:null!==(h=g[i])&& void 0!==h||(g[i]=new z(f,a))),(p(b,a)||a.hasAttribute(e))&&c(b,a,d),NodeFilter.FILTER_SKIP}let k=new MutationObserver(h);return d&&i(f().document.body),k.observe(a,{childList:!0,subtree:!0,attributes:!0,attributeFilter:[e]}),()=>{k.disconnect()}}(b,this,q,a)}}},this.internal.resumeObserver(!1),B(d)}dispose(){var a,b,c,d,e,f,g;this.internal.stopObserver();let h=this._win;this._forgetMemorizedElements=[],h&&this._forgetMemorizedTimer&&(h.clearTimeout(this._forgetMemorizedTimer),delete this._forgetMemorizedTimer),null===(a=this.outline)|| void 0===a||a.dispose(),null===(b=this.crossOrigin)|| void 0===b||b.dispose(),null===(c=this.deloser)|| void 0===c||c.dispose(),null===(d=this.groupper)|| void 0===d||d.dispose(),null===(e=this.mover)|| void 0===e||e.dispose(),null===(f=this.modalizer)|| void 0===f||f.dispose(),null===(g=this.observedElement)|| void 0===g||g.dispose(),this.keyboardNavigation.dispose(),this.focusable.dispose(),this.focusedElement.dispose(),this.root.dispose(),function(a){let b=x(a);b.fakeWeakRefsStarted=!1,b.fakeWeakRefsTimer&&(a().clearTimeout(b.fakeWeakRefsTimer),b.fakeWeakRefsTimer=void 0,b.fakeWeakRefs=[])}(this.getWindow),L(this.getWindow),this._storage=new WeakMap,h&&(function(a){let b=a.__tabsterInstanceContext;b&&(b.elementByUId={},delete b.WeakRef,b.containerBoundingRectCache={},b.containerBoundingRectCacheTimer&&a.clearTimeout(b.containerBoundingRectCacheTimer),b.fakeWeakRefsTimer&&a.clearTimeout(b.fakeWeakRefsTimer),b.fakeWeakRefs=[],delete a.__tabsterInstanceContext)}(h),delete h.__tabsterInstance,delete this._win)}storageEntry(a,b){let c=this._storage,d=c.get(a);return d?!1===b&&0===Object.keys(d).length&&c.delete(a):!0===b&&(d={},c.set(a,d)),d}static forceCleanup(a){if(a._win)a._forgetMemorizedElements.push(a._win.document.body),!a._forgetMemorizedTimer&&(a._forgetMemorizedTimer=a._win.setTimeout(()=>{delete a._forgetMemorizedTimer;for(let b=a._forgetMemorizedElements.shift();b;b=a._forgetMemorizedElements.shift())L(a.getWindow,b),as.forgetMemorized(a.focusedElement,b)},0),A(a.getWindow,!0))}}function aH(a,b){let c=aK(a);if(c)return c;let d=new aG(a,b);return a.__tabsterInstance=d,d}function aI(a){return a.groupper||(a.groupper=new au(a,a.getWindow)),a.groupper}function aJ(a,b){let c=JSON.stringify(a);return!0===b?c:{[e]:c}}function aK(a){return a.__tabsterInstance}}}])