(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[441],{88375:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/timetable-export",function(){return c(87930)}])},87930:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return J}});var d=c(47568),e=c(29815),f=c(34051),g=c.n(f),h=c(85893),i=c(9669),j=c.n(i),k=c(71011),l=c.n(k),m=c(67294),n=c(47157),o=c(38007),p=c(41119),q=c(85290),r=c(82670),s=c(828),t=c(27596),u=c.n(t),v=c(2165),w=function(a){var b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:0;return(0,r.Z)(a,Array)?"{ ".concat(a.map(function(a){return w(a,b)}).join(", ")," }"):(0,v.Z)(b,"'".concat(a,"'"))},x=function(a,b){return"		{ \n			stations = ".concat(w((0,e.Z)(a.keys())),",\n").concat(Array.from(a).map(function(a){var c=(0,s.Z)(a,2),d=c[0],e=c[1];return"			".concat((0,v.Z)("['".concat(d,"']"),b)," = ").concat(w(e,7),",")}).join("\n"),"\n		}")},y=function(a,b){var c=arguments.length>2&& void 0!==arguments[2]?arguments[2]:0,d=arguments.length>3?arguments[3]:void 0;return(0,r.Z)(b,Array)?b.map(function(b){return a[b+c].innerHTML.trim().replace("--",d?"-":"")}):a[b+c].innerHTML.trim().replace("--",d?"-":"")},z=function(a){var b=(0,s.Z)([0,1,2].map(function(b){return(0,e.Z)(a.tHead.rows[b].querySelectorAll("th.bg-f7f7f7")).filter(function(a){return a.innerHTML.trim().length>2}).map(function(a){return a})}),3),c=b[0],d=b[1],f=b[2];if([1,2].includes(c.length)){if(d.length%c.length!=0||d.length<2)throw d.length;if(f.length%c.length!=0||f.length<2)throw f.length}else throw c.length;for(var g=c[0].colSpan,h=[],i=0;i<c.length;i++)u()(c[i].colSpan==g),h.push(i*g);var j=[[],[],[],[]];if(d.length/c.length==2&&f.length/d.length==2)j=[1,2,3,4];else if(d.length/c.length>=2){var k=0,l=c[0].colSpan,m=!0,n=!1,o=void 0;try{for(var p,q=d[Symbol.iterator]();!(m=(p=q.next()).done);m=!0){var r=p.value,t=r.colSpan;if(r.innerHTML.trim().startsWith("首班车"))for(var v=0;v<t;v++){var w=f[k+v].innerHTML.trim();w.includes("↓")||w.includes("内环")?j[0].push(k+v+1):j[1].push(k+v+1)}else for(var x=0;x<t;x++){var z=f[k+x].innerHTML.trim();z.includes("↓")||z.includes("内环")?j[2].push(k+x+1):j[3].push(k+x+1)}if((k+=t)>=l)break}}catch(A){n=!0,o=A}finally{try{m||null==q.return||q.return()}finally{if(n)throw o}}for(var B=0;B<j.length;B++)j[B]=1==j[B].length?j[B][0]:j[B];console.log(j)}else throw d.length;var C=(0,e.Z)(a.tBodies[0].rows).map(function(a){return(0,e.Z)(a.cells)}),D=new Map,E=!0,F=!1,G=void 0;try{for(var H,I=function(a,b){var c=b.value,d=c[0].innerHTML.trim();if(!d||"--"==d)return"break";D.set(c[0].innerHTML.trim(),h.map(function(a){var b=0==c.slice(1).filter(function(a){return a.innerHTML.trim().length>2}).length;return[[y(c,j[0],a,b),y(c,j[1],a,b),],[y(c,j[2],a,b),y(c,j[3],a,b),],]}))},J=C[Symbol.iterator]();!(E=(H=J.next()).done);E=!0){var K=I(J,H);if("break"===K)break}}catch(L){F=!0,G=L}finally{try{E||null==J.return||J.return()}finally{if(F)throw G}}return D},A=c(5227),B={foreground:"var(--colorNeutralForeground2)",background:"var(--colorNeutralBackground2)",gray:"var(--colorPaletteAnchorBorderActive)",lightGray:"var(--colorPalettePlatinumBorderActive)",red:"var(--colorPaletteRedBorder2)",lightRed:"var(--colorPaletteRedBorder2)",orange:"var(--colorPalettePumpkinBorderActive)",lightOrange:"var(--colorPalettePumpkinBorderActive)",yellow:"var(--colorPaletteGoldBorderActive)",lightYellow:"var(--colorPaletteGoldBorderActive)",green:"var(--colorPaletteForestBorderActive)",lightGreen:"var(--colorPaletteForestBorderActive)",teal:"var(--colorPaletteSteelBorderActive)",lightTeal:"var(--colorPaletteSteelBorderActive)",blue:"var(--colorPaletteRoyalBlueBorderActive)",lightBlue:"var(--colorPaletteRoyalBlueBorderActive)",purple:"var(--colorPaletteGrapeBorderActive)",lightPurple:"var(--colorPaletteGrapeBorderActive)"},C={'pre[class*="language-"]':{color:B.foreground,fontFamily:"monospace",direction:"ltr",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",wordWrap:"normal",lineHeight:"1.5",MozTabSize:"2",OTabSize:"2",tabSize:"2",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none",padding:"1em",margin:".5em 0",overflow:"auto",background:B.background},'code[class*="language-"]':{color:B.foreground,fontFamily:"monospace",direction:"ltr",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",wordWrap:"normal",lineHeight:"1.5",MozTabSize:"2",OTabSize:"2",tabSize:"2",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none"},':not(pre) > code[class*="language-"]':{padding:".1em",borderRadius:".3em",background:B.background},keyword:{color:B.purple},builtin:{color:B.lightGreen},"class-name":{color:B.lightRed},"maybe-class-name":{color:B.red},function:{color:B.orange},boolean:{color:B.teal},number:{color:B.blue},string:{color:B.lightGreen},char:{color:B.lightBlue},symbol:{color:B.lightBlue},regex:{color:B.lightGreen},url:{color:B.lightPurple},operator:{color:B.purple},variable:{color:B.blue},constant:{color:B.foreground},property:{color:B.gray},"property-access":{color:B.blue},punctuation:{opacity:.75},important:{color:B.gray},comment:{color:B.lightGray},tag:{color:B.blue},"attr-name":{color:B.yellow},"attr-value":{color:B.lightGreen},namespace:{color:B.red},prolog:{color:B.lightGray},doctype:{color:B.lightGray},cdata:{color:B.lightGray},entity:{color:B.purple},atrule:{color:B.purple},selector:{color:B.blue},inserted:{color:B.lightTeal},deleted:{color:B.lightRed}},D=function(a){var b=a.language,c=a.children;return(0,h.jsx)(A.Z,{language:b,style:C,children:c})},E=D,F=c(9008),G=c.n(F),H=(0,n.Z)({main:{marginInline:"auto",paddingBlock:"2rem",maxWidth:"64rem",minHeight:"100vh",backgroundColor:"var(--colorNeutralBackground2)"},actionsBar:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center","> span":{flexGrow:.05},"> div":{flexGrow:.05},"> button":{flexGrow:.05}}}),I=function(){var a,b=H(),c=(0,m.useRef)(),f=(0,m.useState)(!1),i=f[0],k=f[1],n=(0,m.useState)(""),r=n[0],s=n[1],t=(0,m.useState)(""),u=t[0],v=t[1];(0,m.useEffect)(function(){s("9"),j().get("https://corsproxy.io/?https%3A%2F%2Fwww.cqmetro.cn%2Friding-guide.html").then(function(a){c.current=new DOMParser().parseFromString(a.data,"text/html"),k(!0)})},[]);var w=(a=(0,d.Z)(g().mark(function a(){var b,d,f,h;return g().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:f=z(d=c.current.querySelector("div.result-line-time-list > table#clay10_"+r)),h=(b=Math).max.apply(b,(0,e.Z)((0,e.Z)(f.keys()).map(function(a){return l()(a)})))+4,v(x(f,h));case 5:case"end":return a.stop()}},a)})),function(){return a.apply(this,arguments)});return(0,h.jsxs)("div",{children:[(0,h.jsx)(G(),{children:(0,h.jsx)("title",{children:"Wikipedia时刻表导出"})}),(0,h.jsxs)("main",{className:b.main,children:[(0,h.jsxs)("div",{className:b.actionsBar,children:[(0,h.jsx)(q.P,{children:(0,h.jsx)("option",{value:"CRT",children:"重庆轨道交通"})}),(0,h.jsx)("div",{}),(0,h.jsxs)(q.P,{onChange:function(a){return s(a.target.value)},children:[(0,h.jsx)("option",{value:"9",children:"环线"}),(0,h.jsx)("option",{value:"1",children:"1号线"}),(0,h.jsx)("option",{value:"2",children:"2号线"}),(0,h.jsx)("option",{value:"3",children:"3号线"}),(0,h.jsx)("option",{value:"4",children:"4号线"}),(0,h.jsx)("option",{value:"5",children:"5号线"}),(0,h.jsx)("option",{value:"6",children:"6号线"}),(0,h.jsx)("option",{value:"7",children:"国博线"}),(0,h.jsx)("option",{value:"10",children:"9号线"}),(0,h.jsx)("option",{value:"8",children:"10号线"})]}),(0,h.jsx)("div",{}),(0,h.jsx)(o.z,{onClick:w,disabled:!i,children:i?"导出":(0,h.jsx)(p.$,{size:"tiny"})})]}),(0,h.jsx)(E,{language:"lua",children:u})]})]})},J=I}},function(a){a.O(0,[945,551,277,774,888,179],function(){var b;return a(a.s=88375)}),_N_E=a.O()}])